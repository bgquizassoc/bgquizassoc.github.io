<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>Архив за деня</title>
<style>
 body {
    font-family: Arial, sans-serif;
    background: #0b3d91; /* твоят син фон */
    color: white;
    margin: 0;
    padding: 20px;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #ffffff;
}

#days, #list {
    max-width: 500px;
    margin: 0 auto;
    padding: 0;
}

a.day-link {
    display: block;
    background: white;
    color: #0b3d91;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    border: 2px solid #ffffff33;
}

a.day-link:hover {
    background: #dff5ff;
}

li {
    background: white;
    color: #0b3d91;
    padding: 10px;
    margin-bottom: 8px;
    border-radius: 8px;
    list-style: none;
    border: 2px solid #ffffff33;
    font-weight: bold;
}

</style>
</head>
<body>

<h1 id="title"></h1>
<ol id="list"></ol>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "…",
    authDomain: "…",
    projectId: "…",
    storageBucket: "…",
    messagingSenderId: "…",
    appId: "…"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const params = new URLSearchParams(window.location.search);
  const day = params.get("day");

  document.getElementById("title").textContent = `Архив за ${day}`;

  async function loadDay() {
    const list = document.getElementById("list");
    const snap = await getDocs(collection(db, "archive", day, "players"));

    let arr = [];
    snap.forEach(doc => arr.push(doc.data()));

    arr.sort((a, b) => b.score - a.score);

    arr.forEach((p, i) => {
      const li = document.createElement("li");
      li.textContent = `${i+1}. ${p.name} — ${p.score} т.`;
      list.appendChild(li);
    });
  }

  loadDay();
</script>

</body>
</html>
